<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="waviy">
      <span style="--i: 1">L</span>
      <span style="--i: 2">o</span>
      <span style="--i: 3">a</span>
      <span style="--i: 4">d</span>
      <span style="--i: 5">i</span>
      <span style="--i: 6">n</span>
      <span style="--i: 7">g</span>
      <span style="--i: 8">.</span>
    </div>

    <main>
      <section class="sectionOne">
        <h1>
          <span>T</span>
          <span>R</span>
          <span>I</span>
          <span>N</span>
          <span>I</span>
          <span>T</span>
          <span>Y</span>
        </h1>
        <h2>
          <span class="manhattan">MANHATTAN PROJECT</span>
        </h2>
        <img src="./img/Ellipse 1.png" alt="" />
      </section>
      <section class="sectionTwo">
        <img src="./img/Oppy 1.png" alt="" />
        <audio id="backgroundAudio" loop>
          <source
            src="./Oppenheimer _I am become death_ scene  and real Comparison..mp3"
            type="audio/mp3"
          />
        </audio>
        <div class="descriptionOne">
          <div id="title">Proyek</div>
          <div id="description">
            <q>MANHATTAN</q>
          </div>
          <div id="garis">&nbsp;</div>
          <div id="content">
            Dr. J. Robert Oppenheimer, sebagai direktur ilmiah Proyek Manhattan,
            memimpin tim ilmuan untuk mengembangkan bom atom selama Perang Dunia
            II, merasa terbebani oleh dampak potensial senjata nuklir, tetapi
            melihatnya sebagai satu-satunya cara untuk mengakhiri perang cepat
            dan mencegah korban lebih lanjut. Uji coba sukses di Trinity
            memunculkan perasaan campuran antara keberhasilan ilmiah dan dampak
            kemanusiaan yang mengerikan, menjadikannya pendukung pengendalian
            senjata nuklir setelah perang.
          </div>
        </div>
      </section>
      <section class="sectionThree">
        <canvas class="top-0 left-0 z-[-1]" id="webgl"></canvas>
      </section>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var audio = document.getElementById("backgroundAudio");
        var isSectionTwoVisible = false;

        var sectionTwo = document.querySelector(".sectionTwo");

        var observer = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              // Element is in the viewport
              if (audio.paused) {
                audio
                  .play()
                  .then(function () {
                    // Audio started playing successfully
                    isSectionTwoVisible = true;
                    console.log(isSectionTwoVisible);
                    console.log("Audio Play");
                  })
                  .catch(function (error) {
                    // Handle the error (e.g., autoplay policy prevented playback)
                    console.error("Error playing audio:", error);
                  });
              }
            } else {
              // Element is not in the viewport
              if (!audio.paused) {
                audio.pause();
                isSectionTwoVisible = false;
                console.log(isSectionTwoVisible);
                console.log("Audio Pause");
              }
            }
          });
        });

        // Start observing the sectionTwo element
        observer.observe(sectionTwo);

        // Your existing setTimeout function
        setTimeout(() => {
          document.querySelector(".waviy").style.display = "none";
          document.body.style.overflowX = "hidden";
          document.querySelector("main").style.display = "block";
          document.querySelector("#webgl").style.display = "block";
        }, 7000);
      });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.0/gsap.min.js"></script>
    <script type="module" src="./script.js"></script>
  </body>
</html>
